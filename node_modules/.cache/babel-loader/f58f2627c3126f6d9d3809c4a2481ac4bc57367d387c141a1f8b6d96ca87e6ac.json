{"ast":null,"code":"var _jsxFileName = \"/Users/user/Documents/garden-store/src/components/DiscountForm/index.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useForm } from \"react-hook-form\";\nimport s from './style.module.css';\nimport gnome from './gnome.png';\nimport { fetchGetDiscount } from '../../services/discountRequest';\nimport { useEffect } from 'react';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DiscountForm = () => {\n  _s();\n  var _errors$phone2;\n  const {\n    register,\n    handleSubmit,\n    reset,\n    formState: {\n      errors,\n      isSubmitSuccessful\n    }\n  } = useForm();\n  const onSubmit = data => {\n    fetchGetDiscount(data.phone).then(res => {\n      if (res.status === \"OK\") {\n        toast.success(`Successful! We've sent you code on your phone`, {\n          autoClose: 3500\n        });\n      } else {\n        toast.error(res, {\n          autoClose: 3500\n        });\n      }\n    });\n  };\n  useEffect(() => {\n    if (isSubmitSuccessful) {\n      reset({\n        phone: ''\n      });\n    }\n  }, [isSubmitSuccessful, reset]);\n  const changeClass = () => {\n    var _errors$phone;\n    return ((_errors$phone = errors.phone) === null || _errors$phone === void 0 ? void 0 : _errors$phone.type) === 'pattern' ? `${s.input_tel} ${s.reject}` : s.input_tel;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: s.form,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s.disc_item,\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: s.gnome,\n        src: gnome,\n        alt: \"gnome\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.disc_form_box,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: s.disc_info,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \" 5% off \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 40,\n            columnNumber: 25\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 40,\n            columnNumber: 48\n          }, this), \"on the first order\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: s.disc_form,\n          onSubmit: handleSubmit(onSubmit),\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: changeClass(),\n            type: \"tel\",\n            ...register(\"phone\", {\n              required: true,\n              pattern: /^([+]?\\d{1,3}[-\\s])\\d{2,4}[-\\s]\\d{7,10}$/\n            }),\n            placeholder: \"+49 999 9999999\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 25\n          }, this), ((_errors$phone2 = errors.phone) === null || _errors$phone2 === void 0 ? void 0 : _errors$phone2.type) === 'required' && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: s.required,\n            children: \"This field is required, please type your phone number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: s.submit_btn,\n            type: \"submit\",\n            value: \"Get a discount\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 9\n  }, this);\n};\n_s(DiscountForm, \"l9DE2+eMZ6o/jznvnUn/EY8/jS4=\", false, function () {\n  return [useForm];\n});\n_c = DiscountForm;\nexport default DiscountForm;\nvar _c;\n$RefreshReg$(_c, \"DiscountForm\");","map":{"version":3,"names":["React","useForm","s","gnome","fetchGetDiscount","useEffect","toast","jsxDEV","_jsxDEV","DiscountForm","_s","_errors$phone2","register","handleSubmit","reset","formState","errors","isSubmitSuccessful","onSubmit","data","phone","then","res","status","success","autoClose","error","changeClass","_errors$phone","type","input_tel","reject","className","form","children","disc_item","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","disc_form_box","disc_info","disc_form","required","pattern","placeholder","submit_btn","value","_c","$RefreshReg$"],"sources":["/Users/user/Documents/garden-store/src/components/DiscountForm/index.jsx"],"sourcesContent":["import React from 'react';\nimport { useForm } from \"react-hook-form\";\nimport s from './style.module.css'\nimport gnome from './gnome.png'\nimport { fetchGetDiscount } from '../../services/discountRequest';\nimport { useEffect } from 'react';\nimport { toast } from 'react-toastify';\n\nconst DiscountForm = () => {\n\n    const { register, handleSubmit,reset, formState:{errors, isSubmitSuccessful } } = useForm();\n\n    const onSubmit = data => {\n        fetchGetDiscount(data.phone)\n            .then(res => {\n              if(res.status === \"OK\") {\n                toast.success(`Successful! We've sent you code on your phone`, {autoClose: 3500})\n              } else {\n                toast.error(res, {autoClose: 3500})\n              }\n            })\n    } \n\n    useEffect(() => {\n        if (isSubmitSuccessful) {\n            reset({ phone: '' });\n        }\n    },[isSubmitSuccessful, reset])\n\n    const changeClass = () => {\n       return errors.phone?.type === 'pattern' ? `${s.input_tel} ${s.reject}` : s.input_tel\n    }\n\n    return (\n        <div className={s.form}>\n            <div className={s.disc_item}>\n                <img className={s.gnome} src={gnome} alt=\"gnome\" />\n                <div className={s.disc_form_box}>\n                    <p className={s.disc_info}>\n                        <span > 5% off </span> <br />\n                        on the first order\n                    </p>\n                    <form className={s.disc_form} onSubmit={handleSubmit(onSubmit)}>\n                        <input \n                            className={changeClass()} \n                            type='tel'  \n                            {...register(\"phone\", \n                            { required: true,pattern: /^([+]?\\d{1,3}[-\\s])\\d{2,4}[-\\s]\\d{7,10}$/}\n                            )}\n                            placeholder='+49 999 9999999'\n                        />\n                        {\n                            errors.phone?.type === 'required' && \n                                <p className={s.required}>\n                                    This field is required, please type your phone number\n                                </p>\n                        } \n                        <input className={s.submit_btn} type=\"submit\" value=\"Get a discount\" />\n                    </form>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default DiscountForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}