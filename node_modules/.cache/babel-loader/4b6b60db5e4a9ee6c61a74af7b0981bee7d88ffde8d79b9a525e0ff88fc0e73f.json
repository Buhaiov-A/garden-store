{"ast":null,"code":"var _jsxFileName = \"/Users/user/Documents/garden-store/src/components/OrderForm/index.jsx\",\n  _s = $RefreshSig$();\nimport { useDispatch, useSelector } from 'react-redux';\nimport s from './style.module.css';\nimport { useForm } from \"react-hook-form\";\nimport { fetchBasketOrder } from '../../store/slices/basketSlice';\nimport { toast } from 'react-toastify';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst OrderForm = () => {\n  _s();\n  const dispatch = useDispatch();\n  const {\n    products\n  } = useSelector(state => state);\n  const {\n    data,\n    status,\n    error\n  } = useSelector(state => state.basket);\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors,\n      isSubmitSuccessful\n    }\n  } = useForm();\n  const onSubmit = order => {\n    order = {\n      ...data,\n      phone: data.phone\n    };\n    dispatch(fetchBasketOrder(order));\n  };\n  if (isSubmitSuccessful && status === 'resolve') {\n    toast.success('Order Successfuly Placed!', {\n      autoClose: 2500\n    });\n  } else if (status === 'rejected') {\n    toast.error(error, {\n      autoClose: 2500\n    });\n  }\n  const priceRender = () => {\n    if (products.status === 'resolve') {\n      return data.reduce((prev, item) => {\n        const product = products.data.find(el => el.id === item.id);\n        return prev + item.count * product.finalPrice;\n      }, 0).toFixed(2);\n    } else {\n      return 0;\n    }\n  };\n  const changeClass = () => {\n    var _errors$phone;\n    return (_errors$phone = errors.phone) !== null && _errors$phone !== void 0 && _errors$phone.type && data.length ? `${s.phone_number} ${s.reject}` : s.phone_number;\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: !data.length ? /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/products/all\",\n      className: s.btn_shop,\n      children: \"Shop Now\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit(onSubmit),\n      className: s.basket_form,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: s.title,\n        children: \"Order details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.total_blok,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: s.total_text,\n          children: \"Total\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: s.total_sum,\n          children: [priceRender(), \"$\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.inputs,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: changeClass(),\n          type: \"tel\",\n          name: \"phone\",\n          ...register(\"phone\", {\n            required: true,\n            pattern: /^([+]?\\d{1,3}[-\\s])\\d{2,4}[-\\s]\\d{7,10}$/\n          }),\n          placeholder: \"+49 999 9999999\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: s.order_btn,\n          type: \"submit\",\n          value: \"Order\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }, this)\n  }, void 0, false);\n};\n_s(OrderForm, \"HK8/M2WCeXdKdYLNNK/JIbLEGJ4=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useForm];\n});\n_c = OrderForm;\nexport default OrderForm;\nvar _c;\n$RefreshReg$(_c, \"OrderForm\");","map":{"version":3,"names":["useDispatch","useSelector","s","useForm","fetchBasketOrder","toast","Link","jsxDEV","_jsxDEV","Fragment","_Fragment","OrderForm","_s","dispatch","products","state","data","status","error","basket","register","handleSubmit","formState","errors","isSubmitSuccessful","onSubmit","order","phone","success","autoClose","priceRender","reduce","prev","item","product","find","el","id","count","finalPrice","toFixed","changeClass","_errors$phone","type","length","phone_number","reject","children","to","className","btn_shop","fileName","_jsxFileName","lineNumber","columnNumber","basket_form","title","total_blok","total_text","total_sum","inputs","name","required","pattern","placeholder","order_btn","value","_c","$RefreshReg$"],"sources":["/Users/user/Documents/garden-store/src/components/OrderForm/index.jsx"],"sourcesContent":["import { useDispatch, useSelector } from 'react-redux';\nimport s from './style.module.css'\nimport { useForm } from \"react-hook-form\";\nimport { fetchBasketOrder } from '../../store/slices/basketSlice';\nimport { toast } from 'react-toastify';\nimport { Link } from 'react-router-dom';\n\nconst OrderForm = () => {\n    const dispatch = useDispatch()\n    const { products} = useSelector(state => state)\n    const {data, status, error} = useSelector(state => state.basket)\n    const { register, handleSubmit, formState:{errors, isSubmitSuccessful } } = useForm();\n\n    const onSubmit = order => {\n        order = {...data, phone: data.phone}\n        dispatch(fetchBasketOrder(order))\n    } \n\n    if ( isSubmitSuccessful && status === 'resolve') {\n        toast.success('Order Successfuly Placed!', {\n            autoClose: 2500,\n        })\n    } else if (status === 'rejected') {\n        toast.error(error, {\n            autoClose: 2500,\n        })\n    }\n  \n    const priceRender = () => {\n        if (products.status === 'resolve') {\n            return data.reduce((prev,item) => {\n                const product = products.data.find(el => el.id === item.id)\n                return prev + item.count * product.finalPrice\n            },0).toFixed(2)\n        } else {\n            return 0\n        }\n    }    \n\n    const changeClass = () => {\n        return errors.phone?.type && data.length ? `${s.phone_number} ${s.reject}` : s.phone_number\n    }\n \n    return (\n        <>\n            {\n                !data.length\n                ?\n                <Link to=\"/products/all\" className={s.btn_shop}>\n                    Shop Now\n                </Link>\n                :\n                <form onSubmit={handleSubmit(onSubmit)} className={s.basket_form}>\n                    <h3 className={s.title}>Order details</h3>\n                    <div className={s.total_blok}>\n                        <p className={s.total_text}>Total</p>\n                        <p className={s.total_sum}>{priceRender()}$</p>\n                    </div>\n                    <div className={s.inputs}>\n                        <input \n                            className={changeClass()} \n                            type=\"tel\" \n                            name=\"phone\" \n                            {...register(\"phone\", \n                            { required: true, pattern: /^([+]?\\d{1,3}[-\\s])\\d{2,4}[-\\s]\\d{7,10}$/}\n                            )}\n                            placeholder='+49 999 9999999'\n                        />\n                        <input className={s.order_btn} type=\"submit\" value=\"Order\"/>\n                    </div>\n                </form>\n            } \n        </>\n\n    );\n};\n\nexport default OrderForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}